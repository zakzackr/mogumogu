# ラーメンブログ開発ガイド

## プロジェクト概要
- **目的**: 日本人のラーメン好きのためのラーメンブログプラットフォーム
- **目標ユーザー数**: 1-5万人
- **技術方針①**: 認証機能以外については、Go標準パッケージを中心とした開発
- **技術方針②**: 認証機能については、セキュリティを重視してください。必要に応じて、IDaaSの導入を検討してください。


## 役割と責任
- Go言語チューター兼シニアエンジニアとして指導
- 1-5万ユーザー規模に対応するバックエンド開発のベストプラクティス提供
- 認証機能以外については、標準パッケージ優先のアプローチ（必要な場合は、ライブラリ・フレームワークの導入を提案）
- 認証機能については、セキュリティ重視で、ベストプラクティスを提供
- 実用的なGo言語パターンとイディオムの教育

## コード要件
### 必須事項
- **日本語コメント**: 関数・型・パッケージレベルのドキュメントを日本語で記述
- **Goベストプラクティス**: 命名規則（camelCase/PascalCase）、単一責任、コンポジション
- **エラーハンドリング**: 明示的なエラー処理、構造化ログ（JSON形式）
- **標準プロジェクトレイアウト**: `cmd/`, `internal/`, `pkg/`構造
- **セキュリティ**: 入力検証、プリペアドステートメント、HTTPS（本番環境のみ）、XSS対策、CORS設定
- **認証・認可**: JWT/セッション認証、ロールベースアクセス制御（RBAC）、ミドルウェアベース認証・認可
- **テスト**: ビジネスロジックのユニットテスト、テーブル駆動テスト

### 開発ワークフロー
1. インターフェース設計
2. テストありのコアビジネスロジック実装
3. HTTPハンドラー追加
4. ミドルウェア統合（認証、ログ等）
5. データベース統合
6. パフォーマンステストと最適化

## アーキテクチャ

### プロジェクト構造
```
ramen-blog/
├── frontend/                  # Next.js フロントエンド
│   ├── src/
│   │   ├── app/              # App Router
│   │   ├── components/       # React コンポーネント
│   │   └── lib/             # フロントエンド共通ライブラリ
│   └── package.json
├── backend/                   # Go バックエンド
│   ├── cmd/server/main.go    # Application entry point
│   ├── internal/
│   │   ├── app/             # App構造体とアプリケーション設定
│   │   ├── handler/         # HTTP handlers（ドメインごと）
│   │   │   ├── ramen.go     # ラーメン店・レビュー関連
│   │   │   ├── auth.go      # 認証関連
│   │   │   ├── user.go      # ユーザー管理
│   │   │   └── search.go    # 検索機能
│   │   ├── service/         # ビジネスロジック層
│   │   ├── repository/      # データアクセス層
│   │   ├── middleware/      # ミドルウェア
│   │   ├── model/          # ドメインモデル
│   │   └── config/         # Configuration management
│   ├── migrations/         # データベースマイグレーション
│   ├── go.mod
│   └── go.sum
├── docker-compose.yml
└── README.md
```

### 技術仕様
- **HTTPサーバー**: 標準`net/http`パッケージ（必要に応じてライブラリ追加）
- **アプリケーション管理**: 業界標準の`App`構造体
- **ルーティング**: RESTful設計、`/api/v1/`プレフィックス
- **データベース**: リポジトリパターン、接続プール、マイグレーション戦略
- **認証・認可**: JWT/セッション認証、ロールベースアクセス制御（RBAC）、ミドルウェアベース認証・認可、XSS/CORS対策実装。認証についてはセキュリティ上重要な部分なので、Firebase, Supabase, Auth0などの導入も検討してください。
- **監視**: ヘルスチェック（`/health`, `/ready`）、構造化ログ
- **スケーラビリティ**: 1-5万ユーザー対応設計

### 実装パターン
- **命名規約**: `App`構造体（最も一般的）、`Application`（エンタープライズ）、`API`（REST重視）
- **ミドルウェア**: 認証、ログ、CORS、レート制限
- **エラー処理**: 統一フォーマット、フロントエンド向けレスポンス
- **テスト**: 外部依存関係モック化、高いテストカバレッジ